service: serverless-nodejs-api
frameworkVersion: '3'
useDotenv: true

provider:
    name: aws
    runtime: nodejs20.x
    environment:
        DATABASE_URL: ${env:DATABASE_URL, "fallback value"}

functions:
    api:
        handler: src/index.handler
        events:
            - httpApi: '*'

custom:
    dotenv:
        exclude:
            - AWS_ACCESS_KEY_ID
            - AWS_SECRET_ACCESS_KEY_ID
            - AWS_SESSION_TOKEN

plugins:
    - serverless-offline
    - serverless-dotenv-plugin
